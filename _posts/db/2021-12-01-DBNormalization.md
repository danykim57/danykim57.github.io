---
title:  "데이터베이스 정규화"
header:
  teaser: "https://farm5.staticflickr.com/4076/4940499208_b79b77fb0a_z.jpg"
categories: 
  - db
tags:
  - DB
---

데이터 베이스 설계를 배우다 보면 가장 이해가 안되는 부분이 정규화 파트이다.

왜 정규화가 5단계가 있는지 왜 해야하는지 명확한 설명을 찾기 힘들기 때문인데

위에 출처에 있는 영상 강의에서 명쾌하게 풀어내어준다.

데이터 베이스 설계는 크게 3가지 단계를 거친다

요구 조건 분석 -> 개념적 설계 -> 논리적 데이터 베이스 설계 -> 물리적 데이터베이스 설계 -> 구현

여기서는 논리적 데이터 베이스 설계에서도 데이터 베이스 정규화를 다루겠다.

데이터 베이스 관리 시스템(DBMS)을 사업에서 쓰는 이유는 사업에서 발생하는 모든 것들을 데이터로서 기록하고 쉽게 검색을 할 수 있기 때문이다.

즉 기존의 데이터에 삽입, 편집, 삭제, 조회가 간편하게 되어야 하는데

데이터 베이스 정규화는 이 데이터들이 정확한 형태로 저장이 되어서

삽입, 편집, 삭제, 조회 중에 잘못된 데이터가 나오지 않도록 하는 것이 목적이다.

데이터 베이스의 데이터가 올바른 형태여야 하는 성질을 데이터의 무결성이라고 한다.

1970년대 말 부터 관계형 데이터베이스는 쓰여왔으면 많은 연구와 활용을 해왔는데

데이터베이스 정규화를 쉽게 하는 방법은 데이터를 하나의 주제에 부합하게 만드는 것이다.

이렇게 데이터들을 정리하기 위해서 정규화는 6단계를 거친다.

1. 제 1정규형 by 도메인을 원자값으로 설정
 
 첫번째 단계인 도메인을 원자값으로 설정한다는 말이 애매하다.

원자성은 더이상 쪼개지지 않는 다는 성질인데

아이러니하게도 필요에 따라서 데이터 베이스의 데이터들은 얼마든지 쪼갤 수가 있기 때문이다.

그래서 단순하게 행과 열이 중복되는 값을 하나의 단위로 보는 것이 합리적이다.

열은 속성에 의해서 자연스럽게 나뉘고 행은 기본키의 값으로 찾을 수 있다.

예를 들면 표를 그려서 각 칸에 들어가는 값을 기본 값으로 보자는 것이다. 

그러므로 어떤 행의 데이터인지를 알기 위해서 기본키는 항상 불변하고 각각이 다른 데이터값을 가지고 있어야 한다.

일반적으로는 기본키를 id라는 속성으로 명명하고 오름차순의 숫자를 넣어준다.

2. 제 2정규형 by 부분 함수적 종속 제거

  
  가장 이상적인 관계형 데이터의 형태는 전체 함수적 종속성을 가진 기본키 하나만이 있는 것이다.

그렇다고 다른 데이터를 전부 버리라는 것은 아니다.

데이터 베이스는 수학의 집합론을 기반으로 한다.

데이터를 더 정확하고 빠르게 찾기 위해서 세분화가 필요하다는 것이고

이 세분화를 위해서 표를 쪼개 주면 되는 것이다.

부분 함수적 종속성은 기본키와 기본키 외의 속성, 결정값으로 같은 표에 있는 다른 속성, 의존값의 같은 행렬의 값을 알 수 있다는 것인데

이럴 경우 기본값과 결정값을 기준으로 표를 나누어 준다는 것이다.

수식으로는 (X, Y) -> Z 라고 볼 수 있다.

3. 제 3정규형 by 이행 함수적 종속 제거

  이행 함수적 종속은 기본키가 아닌 속성이 중간 결정값의 역할을 안드는 것이다.

수식으로는 X -> Y -> Z, then X -> Z 라고 보면 된다.

이 관계를 끊어주어서 관계를 단순화 시킨다고 보면 된다.

4. 제 3.5 정규형, BCNF(Boyce Codd NF) by 결정자이면서 후보키가 아닌 키 제거

표 내에서 기본키 이외의 결정자 역할을 할 수 있으면서 후보키가 아닌 키를 없애는 단계이다. 

따라서 이 표는 쪼개 주어야 한다.

5. 제 4정규형 by 다치 종속제거

  다수의 행이 같은 속성에서 반복적으로 나오는 경우가 있는데 이를 다치 종속성이라고 한다.

마찬가지로 중복 데이터를 없애주기 위해서 표를 쪼개 주어야한다.


6. 제 5정규형 by 조인 종속성 이용
  
  마무리로 데이터 베이스 내의 데이터가 빠지거나 뭔가 새로 생기면 안되는데
  
  이를 확인하기 위해서 조인 기능을 이용해서 표를 하나로 만들 경우에
  
  표를 쪼개기 전과 표가 같아야 한다.


정규형

데이터의 중복값을 없애서 무결성을 확보하고 데이터 용량을 줄여 성능을 높이는 과정을 정규형이라고 하고 이 정규형은 5단계로 나뉜다

제 1 정규형 (원자적 도메인)
원자적은 더이상 쪼갤 수 없다는 의미를 가진다.

관계형 데이터 베이스에서는 속성이 일반적으로 가장 작은 단위를 의미하고

ER단계에서 속성은 복합 속성이나 다중값을 가질 수 있는데

복합 속성은 각각의 구성 속성을 하나의 속성으로 처리하고

예) 주소

다중값은 집합으로서 구성 속성들을 하나의 듀플로 만든다.

예) 대학교 수업 번호 (CS104)

이러한 과정을 거치는 이유는 개발자들이 데이터를 원자적으로 다르기 때문에

1 정규화를 하지 않을 경우 데이터를 다룰 때마다 원자화를 시켜주면서 오버헤드가 발생한다.


제 2 정규형

1 정규화가 끝난 테이블이 완전 함수 종속을 가지도록 테이블을 쪼개는 과정이다.

완전 함수 종속은 기본키의 부분집합이 결정자가 되면 안된다는 의미이다.

보이스 코드 정규형(BCNF)
함수 종속으로 찾을 수 있는 중복들을 제거 하여도 남는 중복들을 없애는 과정

함수 종속이란 특정 속성 A를 알면 자연스레 B를 알 수 있는 관계를 말한다.

예) 사원 ID를 알면 ID에 해당하는 사원의 다른 정보:나이, 포지션 등을 알 수 있으므로
ID -> 나이, 포지션은 함수 종속 관계이다.

해당하는 다른 속성들을 찾을 수 있는 속성을 키라고 하는데 키가 될 수 있는 후보들을 후보키라고 한다.

BCNF는 단 하나의 후보키가 있을 때까지 테이블을 쪼개는 정규형이다.

BCNF의 단점은 정규화 과정을 한느 도중 종속성을 보존하지 않는다.

이러한 단점을 커버하기 위한 방법이 제 3 정규형이다.

제 3 정규형

키들 중에서 원자성을 가진 속성값으로 다른 모든 값을 특정할 수 있으면 이를 수퍼키라고 한다.

제 3 정규형은 슈퍼키로 나누어 질때 까지만 정규형 과정을 거친다.

즉 이행적 함수 종속 (A -> B -> C)를 없애는 과정이다.

제 4 정규형

다중 종속성을 제거하는 정규화 과정이다. 특정 속성값에 따라 선택적인 속성을 분리하는 과정이다.

제 5 정규형

조인 정규형, 도메인-키 정규형과 같은 더 높은 정규형들을 제 5 정규형이라고 한다.

제 5 정규형은 잘 사용되지 않는데 그 이유는 정규화를 해야하는 기반인 제약조건들을 설명하기도 어렵고 추론 규칙의 집합도 없기 때문이다.


결론: 데이터 베이스 정규화는 데이터가 정확하게 중복없이 탐색하기 좋은 형태로 만들기 위한 과정이다.




출처: 

https://www.youtube.com/watch?v=RXQ1kZ_JHqg&list=PLimVTOIIZt2aP6msQIw0011mfVP-oJGab&index=6