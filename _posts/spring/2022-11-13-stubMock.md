---
title:  신규 프로젝트에서의 TDD
header:
teaser: "https://farm5.staticflickr.com/4076/4940499208_b79b77fb0a_z.jpg"
categories:
- spring
  tags:
- Spring
---

TDD(Test Driven Development) 관련 강의들이 눈에 띄어서 

테스트에 대해서 생각해보면서 쓰는 글입니다.

실제 현업을 들어가기 전에 IT 서비스 대기업들에서 TDD에 대해서 말을 많이 하는 것을 보고

해보지 않고 실제로 테스트 코드를 많이 짜는 것이 도움이 될거라고 생각을 하였다.

그래서 약 1달 반전에는 업무에서 신규 프로젝트를 시작할 때 테스트를 많이 짰는데 

지금은 하나도 짜고 있지 않다.

**Disclaimer: 현재 이 서비스의 코드를 혼자서 작업하고 신규 프로젝트로서 작업하고 있다는 점을 강조한다.

이유는 크게 3가지가 있다.

  1. 테스트코드가 서비스의 기능이나 목적과는 다르게 테스트를 위한 테스트코드가 되어버렸다.
  2. 모킹 테스트는 서비스의 방향이나 구조가 변경되면 바로 쓰레기 코드가 되어버린다.
  3. 테스트코드가 프로젝트의 설계나 방향성이나 버그를 잡는데 전혀 도움이 되지 않는다.

첫번째의 경우이다.

객체생성부터 시작해서 상태검증을 하는 Inside-out으로 테스트 코드를 짤 때

매개변수에 대한 유효성 체크나 함수의 블랙박스 테스트 등 이미 코드를 짠 사람이 이해하는 것만 테스트를 하는

"테스트코드를 짜기 위한 테스트를 하고 있었다."

시간 대비 기능 구현에 전혀 도움이 되지 않았다.

두번째의 경우이다.

Outside-in인 모킹테스트의 최대 단점은 행위 검증을 하는 테스트이기 때문에 데이터가 흘러가는 방향이 틀어지는 순간 모든 테스트가 의미가 없어진다.

주어진 상황에 예상되는 결과를 체크하는 테스트인 모킹테스트는 매번 서비스의 목적과 기능이 틀어지는 상황에서

전혀 도움이 되지 않았따.

세번째의 경우이다.

테스트 코드를 짜는데 시간이 많이 들더라도 차후에 이 비용이 나중에 코드의 확장성을 고려할 때의

추가적인 비용을 획기적으로 줄일 수 있다는 생각이 들었다면 테스트 코드를 계속 짰을 테지만

현실은 이 서비스가 기능 확장을 할지 않할지 전혀 알 수가 없기 때문에 설득력이 굉장히 떨어졌다.

그래서 한 1달전부터 테스트 코드를 전혀 짜고 있지 않고 있다.




개인적으로 테스트 코드가 유효할 것 같은 경우

  1. 서비스에 다수의 프로그래머가 협업을 하면서 성능저하와 시간투자를 감수하더라도 협업을 위해서 테스트 코드를 짜는게 더 나은 경우
  2. 프로젝트의 설계와 방향성 목적과 기능이 확실하여서 변경이 더이상 안되는 경우
  3. 명확한 오류 케이스가 존재하는 경우

프로젝트 초기 단계에는 아무리 생각해도 전혀 도움이 되지 않는 기법으로 생각된다.

