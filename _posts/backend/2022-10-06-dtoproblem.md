---
title:  "해쉬맵, Dto, VO, Entity"
header:
teaser: "https://farm5.staticflickr.com/4076/4940499208_b79b77fb0a_z.jpg"
categories:
  - BackEnd
tags:
  - BackEnd
---



자바 스프링에서 웹 어플리케이션의 구조를 컨트롤러-서비스-데이터 레이어로 구분하는 이유는

한쪽에서 일어나는 변경에 의해서 어플리케이션 전체가 영향을 받는 것을 방지하기 위함이다.

그러나 객체가 모두 하나의 클래스로 이 컨트롤로-서비스-데이터를 드나드면 의미가 없어진다.

예를 들어서 자바에서 Map 클래스를 구현한 HashMap은 put() 함수와 get() 함수로 간단하게 key : value 값을 넣고 빼고 찾을 수 있다.

HashMap은 이런 편의성에 의해서 일회용 Dto로 쓰이는 경우가 있다.

 - 해쉬맵의 put, get 함수

```java
public void sample() {
      HashMap<String, String> map = new HashMap<>();
      map.put("id", "password");
      map.put("password", "password");
      map.get("id");
      map.get("password");
    }
```

 - 해쉬맵이 API 호출 전반적으로 다 쓰이는 경우
```
 Layers :   외부 API 콜 <-> 컨트롤러 <-> 서비스 <-> 데이터 
 
 Object :    JSON   HashMap   HashMap   HashMap        
```

 - 유저 클래스들로 나눈 API 호출인 경우
```
 Layers :   외부 API 콜 <-> 컨트롤러 <-> 서비스 <-> 데이터 
 
 Object :    JSON   UserDto   UserVO   User        
```

일회용 Dto로 쓰인다함은 같은 형태의 HashMap을 다른 API 호출에서 쓸일이 없다는 의미이다.

정말 이 기능이 앞으로 전혀 변화가 일어나지 않을꺼라면 간단하게 HashMap을 God Class DTO(모든 레이어에서 쓰이는 클래스 DTO)로 써도 된다.

그러나 개인적으로 객체 지향 프로그래밍의 가장 큰 난관은 우리가 어느 부분에서 변화가 일어날지 "예측하기가 너무 어렵다"라는 점이다.

DB에서 변화가 일어날 경우 모델과 데이터 레이어에는 변경이 일어날 수 밖에 없다.

컨트롤러에서 요청 주소나 갑자기 GraphQL을 도입한다는 등의 이유가 일어나면 컨트롤러에서 변경이 일어날수 밖에 없다.

서비스단에서도 추가적인 비즈니스 로직이 들어오면 변경이 된다.

이때 주고 받는 객체를 HashMap으로만 하게되면 변화가 어느 부분에서 일어나든 전체 어플리케이션을 변경해주어야한다.

그러므로, 개인적인 의견으로 DTO는 언제 어디서든 요구사항 변경과 상황의 변화에 적응이 가능한 코드로 유지시키기 위해서 

가능한한 이른 시간에 만들어 놓는 것이 좋다.



절차 지향적인 프로그래밍에서는 HashMap을 써서 현재 데이터에 어떠한 값이 들어가 있는지가 더 직관적이지만

객체 지향적인 프로그래밍에서는 어떤 값이 있냐보다 이 데이터를 하나의 묶음으로 객체로서 보아야한다.

우리의 인지능력은 데이터를 값으로 보는 것보다 하나의 묶음으로 보는 쪽이 더 효율적이기 때문이다.

예를 들어서 유저라는 객체는 아이디, 패스워드, 이름, 나이, 주소, 전화번호 등의 세부 데이터를 포함하고 있지만

이는 유저라고 뭉뚱그려서 말할 수 있고 우리 뇌는 이러게 카테고리화 시킨 방법을 더 좋아한다.

그 누구도 파라미터 수가 20개가 넘어가는 함수를 좋아하지는 않을 것 이다.

HashMap을 이런 함수처럼 쓰이지 않게 하기 위해서 DTO, VO, Entity로 분리 해두어야한다.

이렇게 분리해두면 좀 더 확장에는 열려 있고 수정에는 닫혀있는 코드에 가까워진다. (Open Closed Principle)

아니면 변화가 일어날 때마다 모든 소스 코드를 돌아다니면서 고치고 다니는 자신을 찾을 수 있다. 제가 그랬어요 :( 



